<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaxTracker - Lacrosse Time & Stats</title>
    <meta name="theme-color" content="#0d6efd">
    <meta name="description" content="Lacrosse time and statistics tracking app for coaches and teams">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-4">
        <!-- Header -->
        <header class="bg-primary text-white rounded-3 p-4 mb-4 shadow app-header">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="mb-0">LaxTracker</h1>
                <div class="text-end">
                    <div class="fw-bold">Period: <span id="period" class="badge bg-light text-dark">1</span></div>
                    <div class="fw-bold">Clock: <span id="game-clock" class="badge bg-light text-dark">12:00</span>
                    </div>
                </div>
            </div>

            <!-- Score Display -->
            <div class="d-flex justify-content-around mt-3">
                <div class="text-center">
                    <h3 id="home-team-score" class="mb-1">Home</h3>
                    <div id="home-score" class="display-4 fw-bold">0</div>
                </div>
                <div class="text-center align-self-center">
                    <div class="fs-1">-</div>
                </div>
                <div class="text-center">
                    <h3 id="away-team-score" class="mb-1">Away</h3>
                    <div id="away-score" class="display-4 fw-bold">0</div>
                </div>
            </div>
        </header>

        <!-- Game Controls -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-white">
                        <h5 class="mb-0">Game Controls</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                            <button id="start-stop" class="btn btn-success btn-lg me-md-2">
                                <i class="bi bi-play-fill"></i> Start
                            </button>
                            <button id="reset-period" class="btn btn-warning btn-lg me-md-2">
                                <i class="bi bi-arrow-counterclockwise"></i> Reset Period
                            </button>
                            
                            <!-- <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#settingsModal">
                                <i class="bi bi-gear"></i> Settings
                            </button> -->
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="btn-group mb-3 d-grid gap-2 d-md-flex justify-content-md-center">
                            <button id="newGameBtn" class="btn btn-outline-secondary">
                                <i class="bi bi-file-earmark-plus"></i> New Game
                            </button>
                            <button id="exportGameBtn" class="btn btn-outline-secondary">
                                <i class="bi bi-download"></i> Export
                            </button>
                            <button id="importGameBtn" class="btn btn-outline-secondary">
                                <i class="bi bi-upload"></i> Import
                            </button>
                        </div>
        
                        <!-- Hidden file input for import -->
                        <input type="file" id="importGameInput" accept=".json" style="display: none;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Global Penalty Tracker -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-exclamation-triangle"></i> Active Penalties
                            <span id="active-penalty-count" class="badge bg-light text-danger ms-2">0</span>
                        </h5>
                    </div>
                    <div class="card-body p-0">
                        <div id="global-penalty-list" class="list-group list-group-flush">
                            <!-- Empty state -->
                            <div id="no-active-penalties" class="list-group-item text-center py-4 text-muted">
                                No active penalties
                            </div>
                            <!-- Active penalties will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Player Stats Section -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-white p-0">
                        <ul class="nav nav-tabs" id="teamTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="home-tab" data-bs-toggle="tab"
                                    data-bs-target="#home-team" type="button" role="tab">
                                    <span class="badge bg-primary">Home</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="away-tab" data-bs-toggle="tab" data-bs-target="#away-team"
                                    type="button" role="tab">
                                    <span class="badge bg-danger">Away</span>
                                </button>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="teamTabContent">
                            <!-- Home Team Tab -->
                            <div class="tab-pane fade show active" id="home-team" role="tabpanel">
                                <div class="d-flex flex-wrap gap-2 mb-3" id="home-team-players">
                                    <!-- Home team player pills will go here -->
                                </div>
                                <div id="home-player-stats">
                                    <!-- Home player stats will go here -->
                                </div>
                            </div>

                            <!-- Away Team Tab -->
                            <div class="tab-pane fade" id="away-team" role="tabpanel">
                                <div class="d-flex flex-wrap gap-2 mb-3" id="away-team-players">
                                    <!-- Away team player pills will go here -->
                                </div>
                                <div id="away-player-stats">
                                    <!-- Away player stats will go here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Player Modal -->
    <!-- <div id="add-player-modal" class="modal hidden">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Player</h5>
                    <button type="button" class="btn-close close" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="new-player-form">
                        <div class="mb-3">
                            <label for="player-number" class="form-label">Number</label>
                            <input type="number" class="form-control" id="player-number" required min="1" max="99">
                        </div>
                        <div class="mb-3">
                            <label for="player-first-name" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="player-first-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="player-last-name" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="player-last-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="player-position" class="form-label">Position</label>
                            <select class="form-select" id="player-position" required>
                                <option value="attack">Attack</option>
                                <option value="midfield">Midfield</option>
                                <option value="defense">Defense</option>
                                <option value="goalie">Goalie</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="player-team" class="form-label">Team</label>
                            <select class="form-select" id="player-team" required>
                                <option value="home">Home</option>
                                <option value="away">Away</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close">Cancel</button>
                    <button type="submit" form="new-player-form" class="btn btn-primary">Add Player</button>
                </div>
            </div>
        </div>
    </div> -->

    <!-- Game Settings Modal -->
    <!-- <div class="modal fade hidden" id="settingsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Game Settings</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="settingsForm">
                        <div class="mb-3">
                            <label for="periodLength" class="form-label">Period Length (minutes)</label>
                            <input type="number" class="form-control" id="periodLength" min="1" max="30" required>
                        </div>
                        <div class="mb-3">
                            <label for="numPeriods" class="form-label">Number of Periods</label>
                            <input type="number" class="form-control" id="numPeriods" min="1" max="6" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="overtimeEnabled">
                            <label class="form-check-label" for="overtimeEnabled">Enable Overtime</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveSettings">Save Settings</button>
                </div>
            </div>
        </div>
    </div> -->

    <!-- Toast Notifications -->
    <div id="toast-container" class="position-fixed bottom-0 end-0 p-3" style="z-index: 11"></div>

    <!-- Install PWA Button -->
    <button id="install-btn" class="btn btn-primary d-none">
        <i class="bi bi-download"></i>
    </button>

    <!-- Offline page for service worker -->
    <script id="offline-template" type="text/template">
        <div class="container text-center py-5">
            <h2>You're offline</h2>
            <p>Please check your internet connection and try again.</p>
        </div>
    </script>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Your app.js -->
    <script src="app.js"></script>
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('Service Worker registered with scope:', reg.scope))
                    .catch(err => console.error('Service Worker registration failed:', err));
            });
        }
    </script>
</body>

</html>